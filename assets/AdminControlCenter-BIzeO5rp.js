import{r as h,j as e}from"./ui-Cg0tFRDi.js";import{d as z,a as ce,g as ie,u as oe,b as de,c as xe,e as me,f as he}from"./index-D-kChlQ_.js";import{C as J}from"./Chart-Cw_GaIrV.js";import{C as ue,T as ge}from"./SkeletonLoader-DqBSG0Bt.js";import"./vendor-Bzgz95E1.js";import"./firebase-DCRhkHpN.js";const pe=({onSearch:l,onFilter:m,filters:p,placeholder:r="Search..."})=>{const[n,i]=h.useState(""),[y,v]=h.useState({}),[N,P]=h.useState(!1),a=g=>{i(g),l(g)},c=(g,b)=>{const E={...y,[g]:b};b||delete E[g],v(E),m(E)},t=()=>{v({}),i(""),l(""),m({})},u=Object.keys(y).length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"material-icons-outlined absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:"search"}),e.jsx("input",{type:"text",placeholder:r,value:n,onChange:g=>a(g.target.value),className:"pl-10 pr-4 py-2 w-full"}),n&&e.jsx("button",{onClick:()=>a(""),className:"material-icons-outlined absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"close"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>P(!N),className:`btn ${N?"btn-primary":"btn-secondary"} relative`,children:[e.jsx("span",{className:"material-icons-outlined",children:"filter_list"}),"Filters",u>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:u})]}),u>0&&e.jsxs("button",{onClick:t,className:"btn btn-secondary",children:[e.jsx("span",{className:"material-icons-outlined",children:"clear"}),"Clear"]})]})]}),N&&e.jsx("div",{className:"card p-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:p.map(g=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:g.label}),e.jsxs("select",{value:y[g.key]||"",onChange:b=>c(g.key,b.target.value),className:"w-full",children:[e.jsxs("option",{value:"",children:["All ",g.label]}),g.options.map(b=>e.jsx("option",{value:b,children:b},b))]})]},g.key))})]})},be=({selectedCount:l,totalCount:m,onSelectAll:p,onDeselectAll:r,actions:n})=>l===0?null:e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-blue-700 dark:text-blue-300 font-medium",children:[l," of ",m," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[l<m&&e.jsxs("button",{onClick:p,className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:["Select all ",m]}),e.jsx("button",{onClick:r,className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"Deselect all"})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:n.map((i,y)=>e.jsxs("button",{onClick:i.onClick,disabled:i.disabled,className:`btn ${i.color==="danger"?"btn-danger":i.color==="primary"?"btn-primary":"btn-secondary"} flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx("span",{className:"material-icons-outlined text-sm",children:i.icon}),i.label]},y))})]})}),je=[...ce.items,...ie.items],U=({title:l,value:m,change:p,icon:r,iconColor:n})=>e.jsxs("div",{className:"card p-5",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l}),e.jsx("span",{className:`material-icons-outlined ${n}`,children:r})]}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:m}),e.jsx("p",{className:"text-xs text-green-500 font-medium mt-1",children:p})]}),ye=({users:l,loading:m,error:p,sort:r,handleSort:n,handleEditUser:i,handleDeleteUser:y,planDetails:v,selectedUsers:N,onUserSelect:P})=>{const a=({column:t,label:u})=>e.jsxs("th",{className:"py-3 px-4 font-semibold sortable-header cursor-pointer",onClick:()=>n(t),children:[u,r.column===t&&e.jsx("span",{className:"sort-indicator ml-1",children:e.jsx("span",{className:"material-icons-outlined text-sm align-middle",children:r.direction==="asc"?"arrow_upward":"arrow_downward"})})]}),c=t=>t.profilePictureUrl?t.profilePictureUrl:t.profilePictureId?`https://lh3.googleusercontent.com/d/${t.profilePictureId}`:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name)}&background=random`;return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"border-b border-inherit text-gray-500 dark:text-gray-400 text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 w-12 font-semibold",children:e.jsx("input",{type:"checkbox",checked:l.length>0&&l.every(t=>N.has(t.id)),onChange:t=>{l.forEach(u=>P(u.id,t.target.checked))},className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"})}),e.jsx(a,{column:"name",label:"User"}),e.jsx(a,{column:"accessPage",label:"Access Page"}),e.jsx(a,{column:"plan",label:"Plan"}),e.jsx(a,{column:"role",label:"Role"}),e.jsx(a,{column:"status",label:"Status"}),e.jsx(a,{column:"joinDate",label:"Join Date"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"text-sm",children:m?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-8",children:e.jsx("div",{className:"spinner mx-auto"})})}):p?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-8 text-red-500",children:p})}):l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-8 text-gray-500",children:"No users found."})}):l.map(t=>e.jsxs("tr",{className:"border-b border-inherit last:border-b-0 hover:bg-gray-50 dark:hover:bg-slate-800",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:N.has(t.id),onChange:u=>P(t.id,u.target.checked),className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:c(t),className:"w-8 h-8 rounded-full object-cover",alt:t.name}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.email})]})]})}),e.jsx("td",{className:"px-4 py-3 text-gray-500 dark:text-gray-400 text-xs truncate max-w-xs",title:Array.isArray(t.accessPage)?t.accessPage.join(", "):t.accessPage,children:Array.isArray(t.accessPage)?t.accessPage.join(", "):t.accessPage}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-medium rounded-full ${v[t.plan].color}`,children:t.plan})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-medium rounded-full ${t.role==="Admin"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:t.role})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-medium rounded-full ${t.status==="Active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}`,children:t.status}),t.status==="Inactive"&&t.inactiveDate&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t.inactiveDate})]})}),e.jsx("td",{className:"px-4 py-3",children:t.joinDate}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[e.jsx("button",{onClick:()=>i(t),className:"material-icons-outlined text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 p-1",children:"edit"}),e.jsx("button",{onClick:()=>y(t),className:"material-icons-outlined text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-500 p-1",children:"delete"})]})]},t.id))})]})})},fe=({pagination:l,setPagination:m,totalUsers:p,totalPages:r})=>e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mt-4 text-sm text-gray-500 dark:text-gray-400 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Rows per page:"}),e.jsxs("select",{value:l.rowsPerPage,onChange:n=>m({...l,rowsPerPage:Number(n.target.value),currentPage:1}),className:"p-1 text-sm rounded-md border-gray-300 dark:border-gray-600 focus:ring-blue-500",children:[e.jsx("option",{children:"10"}),e.jsx("option",{children:"25"}),e.jsx("option",{children:"50"})]})]}),e.jsxs("div",{children:["Showing ",p>0?(l.currentPage-1)*l.rowsPerPage+1:0," to ",Math.min(l.currentPage*l.rowsPerPage,p)," of ",p," users."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>m(n=>({...n,currentPage:n.currentPage-1})),disabled:l.currentPage===1,className:"px-3 py-1 rounded-md font-semibold border border-inherit hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>m(n=>({...n,currentPage:n.currentPage+1})),disabled:l.currentPage===r,className:"px-3 py-1 rounded-md font-semibold border border-inherit hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),ve=({user:l,onSave:m,onCancel:p})=>{const[r,n]=h.useState({name:"",email:"",role:"User",status:"Active",accessPage:[],plan:"Free",inactiveDate:"",profilePictureId:void 0,...l}),[i,y]=h.useState(null);h.useEffect(()=>{const a={name:"",email:"",role:"User",status:"Active",accessPage:[],plan:"Free",inactiveDate:"",profilePictureId:void 0,profilePictureUrl:void 0,...l};n(a),a.profilePictureUrl?y(a.profilePictureUrl):a.profilePictureId?y(`https://lh3.googleusercontent.com/d/${a.profilePictureId}`):y(null)},[l]);const v=(a,c)=>{const t=Array.isArray(r.accessPage)?r.accessPage:(r.accessPage||"").split(",").map(g=>g.trim()).filter(Boolean),u=c?[...t,a]:t.filter(g=>g!==a);n(g=>({...g,accessPage:u}))},N=a=>{const c=a.target.value,t=c==="Inactive"&&!r.inactiveDate?new Date().toISOString().split("T")[0]:c==="Active"?void 0:r.inactiveDate;n(u=>({...u,status:c,inactiveDate:t}))},P=a=>{a.preventDefault(),m(r,null)};return e.jsx("div",{className:"card w-full max-w-3xl",children:e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:l?"Edit User":"Add New User"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-grow space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:r.name,onChange:a=>n(c=>({...c,name:a.target.value})),className:"w-full p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",value:r.email,onChange:a=>n(c=>({...c,email:a.target.value})),className:"w-full p-2",required:!0,disabled:!!l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Role"}),e.jsxs("select",{value:r.role,onChange:a=>n(c=>({...c,role:a.target.value})),className:"w-full p-2",children:[e.jsx("option",{children:"User"}),e.jsx("option",{children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Plan"}),e.jsxs("select",{value:r.plan,onChange:a=>n(c=>({...c,plan:a.target.value})),className:"w-full p-2",children:[e.jsx("option",{children:"Free"}),e.jsx("option",{children:"Pro"}),e.jsx("option",{children:"Enterprise"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),e.jsxs("select",{value:r.status,onChange:N,className:"w-full p-2",children:[e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Inactive"})]})]}),r.status==="Inactive"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Inactive Since"}),e.jsx("input",{type:"date",value:r.inactiveDate||"",onChange:a=>n(c=>({...c,inactiveDate:a.target.value})),className:"w-full p-2",required:!0})]})]})}),e.jsxs("div",{className:"flex-shrink-0 w-full md:w-40 text-center",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Profile Picture"}),e.jsx("img",{src:i||`https://ui-avatars.com/api/?name=${encodeURIComponent(r.name||"New User")}&background=random`,className:"w-32 h-32 rounded-full object-cover mx-auto mb-2",alt:"Profile"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Gmail Profile Only"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Access Pages"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-48 overflow-y-auto p-2 border border-inherit rounded-md",children:je.map(a=>e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:(Array.isArray(r.accessPage)?r.accessPage:(r.accessPage||"").split(",")).includes(a.id),onChange:c=>v(a.id,c.target.checked),className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),a.label]},a.id))})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 p-4 flex justify-end gap-3 rounded-b-xl",children:[e.jsx("button",{type:"button",onClick:p,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save User"})]})]})})},Ae=({theme:l,setModal:m,user:p})=>{var Q;const[r,n]=h.useState({totalUsers:0,totalMerges:0,activeSubscriptions:0,recentMerges:[]}),[i,y]=h.useState([]),[v,N]=h.useState(!0),[P,a]=h.useState(null),[c,t]=h.useState("overview"),[u,g]=h.useState({search:"",role:"",status:"",plan:""}),[b,E]=h.useState({column:"joinDate",direction:"desc"}),[S,q]=h.useState({currentPage:1,rowsPerPage:10}),[H,L]=h.useState(!1),[$,_]=h.useState(null),[A,M]=h.useState(new Set),[I,Z]=h.useState(""),V={Free:{price:"Free",color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},Pro:{price:"$10/mo",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},Enterprise:{price:"Custom",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}},o=h.useMemo(()=>{const s=i.length,d=i.filter(f=>f.status==="Active").length,x=i.filter(f=>f.status==="Inactive").length,j=i.filter(f=>f.role==="Admin").length,k=i.filter(f=>f.plan==="Free").length,C=i.filter(f=>f.plan==="Pro").length,w=i.filter(f=>f.plan==="Enterprise").length;return{totalUsers:s,activeUsers:d,inactiveUsers:x,adminUsers:j,freePlanUsers:k,proPlanUsers:C,enterprisePlanUsers:w}},[i]),W=async()=>{try{const s=await me();n(s)}catch(s){a("Failed to load dashboard data."),console.error(s)}},R=async()=>{try{console.log("Fetching users data...");const s=await he();console.log("Users data fetched:",s),console.log("Number of users:",s.length),y(s)}catch(s){a("Failed to load user data."),console.error("Error fetching users data:",s)}};h.useEffect(()=>{(async()=>{N(!0),await Promise.all([W(),R()]),N(!1)})()},[]);const K=s=>{E(d=>({column:s,direction:d.column===s&&d.direction==="asc"?"desc":"asc"}))},G=()=>{_(null),L(!0)},X=s=>{_(s),L(!0)},O=()=>{L(!1),_(null)},Y=async(s,d)=>{m({type:"progress",props:{title:"Saving User...",message:"Please wait while we process your request."}});try{let x={...s};if(d){const k=await oe(d);x.profilePictureUrl=k.url}const j={...x,accessPage:Array.isArray(x.accessPage)?x.accessPage.join(","):x.accessPage};$&&$.id?await de(p,$.id,j):await xe(j),await R()}catch(x){alert(`Error saving user: ${x.message}`)}m({type:null,props:{}}),O()},ee=s=>{const d=i.filter(w=>s.includes(w.id)),x=[["Name","Email","Role","Status","Plan","Join Date"].join(","),...d.map(w=>[w.name,w.email,w.role,w.status,w.plan,w.joinDate].join(","))].join(`
`),j=new Blob([x],{type:"text/csv"}),k=URL.createObjectURL(j),C=document.createElement("a");C.href=k,C.download=`users_export_${new Date().toISOString().split("T")[0]}.csv`,C.click(),URL.revokeObjectURL(k)},se=()=>{m({type:"confirmation",props:{title:"Delete Multiple Users",message:`Are you sure you want to delete ${A.size} selected users? This action cannot be undone.`,onConfirm:async()=>{try{await Promise.all(Array.from(A).map(s=>z(s))),await R(),M(new Set)}catch(s){alert(`Error deleting users: ${s.message}`)}m({type:null,props:{}})}}})},te=s=>{m({type:"confirmation",props:{title:"Delete User",message:`Are you sure you want to delete user <strong>${s.name}</strong>? This action cannot be undone.`,onConfirm:async()=>{try{s.id&&(await z(s.id),await R())}catch(d){alert(`Error deleting user: ${d.message}`)}m({type:null,props:{}})}}})},D=h.useMemo(()=>i.filter(s=>{const d=I===""||s.name.toLowerCase().includes(I.toLowerCase())||s.email.toLowerCase().includes(I.toLowerCase()),x=u.role===""||s.role===u.role,j=u.status===""||s.status===u.status,k=!u.plan||s.plan===u.plan;return d&&x&&j&&k}).sort((s,d)=>{const x=s[b.column],j=d[b.column];return x<j?b.direction==="asc"?-1:1:x>j?b.direction==="asc"?1:-1:0}),[i,I,u,b]),ae=h.useMemo(()=>{const s=(S.currentPage-1)*S.rowsPerPage;return D.slice(s,s+S.rowsPerPage)},[D,S]),re=Math.ceil(D.length/S.rowsPerPage),{mergeActivityChartConfig:le,userGrowthChartConfig:ne}=h.useMemo(()=>{const s=l==="dark",d=s?"#334155":"#e2e8f0",x=s?"#94a3b8":"#64748B",j=new Date,k=Array.from({length:7},(T,F)=>{const B=new Date(j);return B.setDate(j.getDate()-(6-F)),B.toISOString().split("T")[0]}),C=k.map(T=>r.recentMerges.filter(F=>(F.timestamp?new Date(F.timestamp).toISOString().split("T")[0]:F.date)===T).length);return{mergeActivityChartConfig:{type:"bar",data:{labels:k.map(T=>new Date(T).toLocaleDateString("en-US",{weekday:"short"})),datasets:[{label:"Merges",data:C,backgroundColor:"#4F46E5",borderColor:"#4F46E5",borderWidth:1,borderRadius:4,barPercentage:.5}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:d},border:{display:!1},ticks:{display:!1}},x:{grid:{display:!1},ticks:{color:x}}}}},userGrowthChartConfig:{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"New Users",data:[65,159,280,381,456,550],fill:!0,backgroundColor:"rgba(79, 70, 229, 0.1)",borderColor:"#4F46E5",pointBackgroundColor:"#4F46E5",tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:d},border:{display:!1},ticks:{color:x}},x:{grid:{display:!1},ticks:{color:x}}}}}}},[l]);return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx("span",{className:"material-icons-outlined text-blue-600 dark:text-blue-500",children:"admin_panel_settings"}),"Admin Control"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1 text-base",children:"Comprehensive admin dashboard and user management in one place."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:v?Array.from({length:8}).map((s,d)=>e.jsx(ue,{},d)):e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"Total Users",value:o.totalUsers.toString(),change:`${o.activeUsers} active`,icon:"group",iconColor:"text-blue-500 dark:text-blue-400"}),e.jsx(U,{title:"Active Users",value:o.activeUsers.toString(),change:`${Math.round(o.activeUsers/o.totalUsers*100)}% active`,icon:"person_check",iconColor:"text-green-500 dark:text-green-400"}),e.jsx(U,{title:"Inactive Users",value:o.inactiveUsers.toString(),change:`${Math.round(o.inactiveUsers/o.totalUsers*100)}% inactive`,icon:"person_off",iconColor:"text-yellow-500 dark:text-yellow-400"}),e.jsx(U,{title:"Admin Users",value:o.adminUsers.toString(),change:`${Math.round(o.adminUsers/o.totalUsers*100)}% admins`,icon:"admin_panel_settings",iconColor:"text-purple-500 dark:text-purple-400"}),e.jsx(U,{title:"Active Subscriptions",value:r.activeSubscriptions.toLocaleString(),change:`${Math.round(r.activeSubscriptions/o.totalUsers*100)}% paid users`,icon:"subscriptions",iconColor:"text-yellow-500 dark:text-yellow-400"}),e.jsx(U,{title:"Total Merges",value:r.totalMerges.toLocaleString(),change:"All time",icon:"merge_type",iconColor:"text-indigo-500 dark:text-indigo-400"}),e.jsx(U,{title:"System Health",value:"99.9%",change:"All systems operational",icon:"shield",iconColor:"text-purple-500 dark:text-purple-400"}),e.jsx(U,{title:"API Calls (24h)",value:(((Q=r.apiCallsLast30Days)==null?void 0:Q.slice(-1)[0])||0).toLocaleString(),change:"Last 24 hours",icon:"api",iconColor:"text-teal-500 dark:text-teal-400"})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>t("overview"),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ${c==="overview"?"border-blue-500 text-blue-600 dark:text-blue-500":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("span",{className:"material-icons-outlined text-base",children:"dashboard"}),"Overview"]}),e.jsxs("button",{onClick:()=>t("users"),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ${c==="users"?"border-blue-500 text-blue-600 dark:text-blue-500":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,"data-tab":"users",children:[e.jsx("span",{className:"material-icons-outlined text-base",children:"group"}),"User Management"]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-3",children:[c==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Recent System Merges"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"A log of the most recent merge operations across the system."}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-sm text-gray-500 dark:text-gray-400 uppercase border-b border-inherit",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 font-semibold",children:"SN"}),e.jsx("th",{scope:"col",className:"px-4 py-3 font-semibold",children:"File Name"}),e.jsx("th",{scope:"col",className:"px-4 py-3 font-semibold",children:"User"}),e.jsx("th",{scope:"col",className:"px-4 py-3 font-semibold",children:"Type"}),e.jsx("th",{scope:"col",className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{scope:"col",className:"px-4 py-3 font-semibold",children:"Date"})]})}),e.jsx("tbody",{children:v?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8",children:e.jsx("div",{className:"spinner mx-auto"})})}):P?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-red-500",children:P})}):r.recentMerges.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:"No recent merges found."})}):r.recentMerges.map((s,d)=>e.jsxs("tr",{className:"border-b border-inherit last:border-b-0 hover:bg-gray-50 dark:hover:bg-slate-800",children:[e.jsx("td",{className:"px-4 py-4 text-gray-500 dark:text-gray-400",children:s.sn}),e.jsx("td",{className:"px-4 py-4 font-medium",children:s.fileName}),e.jsx("td",{className:"px-4 py-4 text-gray-500 dark:text-gray-400",children:s.user}),e.jsx("td",{className:"px-4 py-4 text-gray-500 dark:text-gray-400",children:s.type}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-medium rounded-full ${s.status==="Success"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"}`,children:s.status})}),e.jsx("td",{className:"px-4 py-4 text-gray-500 dark:text-gray-400",children:s.date})]},d))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"System Merge Activity"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Merge operations in the last 7 days."}),e.jsx("div",{children:e.jsx(J,{config:le,className:"h-48"})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"User Growth"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"New users in the last 6 months."}),e.jsx("div",{children:e.jsx(J,{config:ne,className:"h-48"})})]})]})]}),c==="users"&&e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"All Users"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Manage user accounts, roles, and access permissions."})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 md:mt-0",children:[e.jsxs("button",{className:"btn btn-secondary",children:[e.jsx("span",{className:"material-icons-outlined text-base",children:"download"})," Export CSV"]}),e.jsxs("button",{onClick:G,className:"btn btn-primary",children:[e.jsx("span",{className:"material-icons-outlined",children:"add"})," Add User"]})]})]}),e.jsx(pe,{onSearch:Z,onFilter:s=>g({...u,...s}),filters:[{key:"role",label:"Role",options:["Admin","User"]},{key:"status",label:"Status",options:["Active","Inactive"]},{key:"plan",label:"Plan",options:["Free","Pro","Enterprise"]}],placeholder:"Search users by name or email..."}),e.jsx(be,{selectedCount:A.size,totalCount:D.length,onSelectAll:()=>M(new Set(D.map(s=>s.id))),onDeselectAll:()=>M(new Set),actions:[{label:"Export Selected",icon:"download",onClick:()=>ee(Array.from(A)),color:"secondary"},{label:"Delete Selected",icon:"delete",onClick:()=>se(),color:"danger"}]}),v?e.jsx(ge,{rows:S.rowsPerPage,cols:8}):e.jsx(ye,{users:ae,loading:v,error:P,sort:b,handleSort:K,handleEditUser:X,handleDeleteUser:te,planDetails:V,selectedUsers:A,onUserSelect:(s,d)=>{const x=new Set(A);d?x.add(s):x.delete(s),M(x)}}),e.jsx(fe,{pagination:S,setPagination:q,totalUsers:D.length,totalPages:re})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Quick Actions"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Perform common administrative tasks."}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{onClick:G,className:"w-full bg-blue-600 text-white font-semibold py-2.5 rounded-lg flex items-center justify-center gap-2 hover:bg-blue-700 transition-colors",children:[e.jsx("span",{className:"material-icons-outlined text-xl",children:"person_add"})," Add New User"]}),e.jsxs("button",{onClick:()=>window.location.hash="system-analytics",className:"w-full bg-gray-100 dark:bg-slate-700 font-semibold py-2.5 rounded-lg flex items-center justify-center gap-2 hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors",children:[e.jsx("span",{className:"material-icons-outlined text-xl",children:"analytics"})," System Analytics"]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"User Statistics"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Current user distribution overview."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Active Users"}),e.jsx("span",{className:"font-semibold",children:o.activeUsers})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${o.activeUsers/o.totalUsers*100}%`}})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Inactive Users"}),e.jsx("span",{className:"font-semibold",children:o.inactiveUsers})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:`${o.inactiveUsers/o.totalUsers*100}%`}})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Admin Users"}),e.jsx("span",{className:"font-semibold",children:o.adminUsers})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:`${o.adminUsers/o.totalUsers*100}%`}})})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Plan Statistics"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"User distribution by plan."}),e.jsx("table",{className:"w-full text-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-inherit",children:[e.jsx("td",{className:"py-2 px-2 font-medium",children:"Free Plan Users"}),e.jsx("td",{className:"py-2 px-2 text-right font-semibold",children:o.freePlanUsers})]}),e.jsxs("tr",{className:"border-b border-inherit",children:[e.jsx("td",{className:"py-2 px-2 font-medium",children:"Pro Plan Users"}),e.jsx("td",{className:"py-2 px-2 text-right font-semibold",children:o.proPlanUsers})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-2 font-medium",children:"Enterprise Plan Users"}),e.jsx("td",{className:"py-2 px-2 text-right font-semibold",children:o.enterprisePlanUsers})]})]})})]})]})]}),H&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0",onClick:O}),e.jsx("div",{className:"relative z-10",children:e.jsx(ve,{user:$,onSave:Y,onCancel:O})})]})]})};export{Ae as default};
