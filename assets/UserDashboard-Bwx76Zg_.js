import{r as i,j as e}from"./ui-Cg0tFRDi.js";import{h as m}from"./index-D-kChlQ_.js";import{C as g}from"./Chart-Cw_GaIrV.js";import{C as h,T as p}from"./SkeletonLoader-DqBSG0Bt.js";import"./vendor-Bzgz95E1.js";import"./firebase-DCRhkHpN.js";const n=({title:l,value:a,change:s,icon:c,iconColor:o})=>e.jsxs("div",{className:"card p-5",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l}),e.jsx("span",{className:`material-icons-outlined ${o}`,children:c})]}),e.jsx("p",{className:`${l==="Templates & Success"?"text-2xl":"text-3xl"} font-bold mt-2`,children:a}),e.jsx("p",{className:"text-xs text-green-500 font-medium mt-1",children:s})]}),k=({theme:l,user:a})=>{const[s,c]=i.useState(null),[o,d]=i.useState(!0);i.useEffect(()=>{(async()=>{if(a!=null&&a.email){console.log("UserDashboard: Fetching data for user:",a.email),d(!0);try{const r=await m(a.email);console.log("UserDashboard: Received data:",r),c(r)}catch(r){console.error("UserDashboard: Error fetching data:",r),c({totalUserMerges:0,docsGenerated:0,slidesGenerated:0,recentUserMerges:[],mergeActivityLast7Days:[0,0,0,0,0,0,0],successRate:0,templatesUsed:0})}finally{d(!1)}}})()},[a]);const x=i.useMemo(()=>{const r=l==="dark"?"#94a3b8":"#64748B";return{type:"bar",data:{labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Merges",data:(s==null?void 0:s.mergeActivityLast7Days)||[0,0,0,0,0,0,0],backgroundColor:"#4F46E5",borderWidth:0,borderRadius:4,barPercentage:.6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{display:!1},x:{grid:{display:!1},ticks:{color:r}}}}}},[l,s]);return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx("span",{className:"material-icons-outlined text-blue-600 dark:text-blue-500",children:"bar_chart"}),"User Dashboard"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1 text-base",children:"Welcome back! Here's a quick overview of your activity."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:o?Array.from({length:4}).map((t,r)=>e.jsx(h,{},r)):e.jsxs(e.Fragment,{children:[e.jsx(n,{title:"Your Total Merges",value:(s==null?void 0:s.totalUserMerges.toLocaleString())??"...",change:"+120 this week",icon:"analytics",iconColor:"text-blue-500"}),e.jsx(n,{title:"Docs Generated",value:(s==null?void 0:s.docsGenerated.toLocaleString())??"...",change:"+15.2% from last week",icon:"article",iconColor:"text-green-500"}),e.jsx(n,{title:"Slides Generated",value:(s==null?void 0:s.slidesGenerated.toLocaleString())??"...",change:"+12.1% from last week",icon:"slideshow",iconColor:"text-yellow-500"}),e.jsx(n,{title:"Templates & Success",value:`${(s==null?void 0:s.templatesUsed)??"..."} Used / ${(s==null?void 0:s.successRate)??"..."}%`,change:"+5 new, +1.2% up",icon:"category",iconColor:"text-purple-500"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 card p-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Your Recent Merges"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"A log of your most recent merge operations."}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-sm text-gray-500 dark:text-gray-400 uppercase border-b border-inherit",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 font-semibold",children:"SN"}),e.jsx("th",{scope:"col",className:"px-4 py-3 font-semibold",children:"File Name"}),e.jsx("th",{scope:"col",className:"px-4 py-3 font-semibold",children:"Type"}),e.jsx("th",{scope:"col",className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{scope:"col",className:"px-4 py-3 font-semibold",children:"Date"})]})}),e.jsx("tbody",{children:o?e.jsx(p,{rows:5,cols:5}):!s||s.recentUserMerges.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"No recent merges found."})}):s.recentUserMerges.map(t=>e.jsxs("tr",{className:"border-b border-inherit last:border-b-0 hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-gray-500 dark:text-gray-400",children:t.sn}),e.jsx("td",{className:"px-4 py-4 font-medium",children:t.fileName}),e.jsx("td",{className:"px-4 py-4 text-gray-500 dark:text-gray-400",children:t.type}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-medium rounded-full ${t.status==="Success"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 success-animation":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"}`,children:t.status})}),e.jsx("td",{className:"px-4 py-4 text-gray-500 dark:text-gray-400",children:t.date})]},t.sn))})]})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Your Merge Activity"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Merge operations in the last 7 days."}),e.jsx("div",{children:e.jsx(g,{config:x,className:"h-48"})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Quick Actions"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started with a new task."}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{onClick:()=>window.location.hash="marge-it",className:"w-full bg-blue-600 text-white font-semibold py-2.5 rounded-lg flex items-center justify-center gap-2 hover:bg-blue-700 transition-colors",children:[e.jsx("span",{className:"material-icons-outlined text-xl",children:"rocket_launch"})," Start a New Merge"]}),e.jsxs("button",{onClick:()=>window.location.hash="merge-logs",className:"w-full bg-gray-100 dark:bg-slate-700 font-semibold py-2.5 rounded-lg flex items-center justify-center gap-2 hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors",children:[e.jsx("span",{className:"material-icons-outlined text-xl",children:"visibility"})," View Your Merge Logs"]})]})]})]})]})]})};export{k as default};
